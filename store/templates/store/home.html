{% extends 'store/base.html' %}
{% load static %}
{% load custom_filters %} 

{% block content %}

<style>
    /* --- 1. GARAGE EXACT GLOBAL STYLES --- */
    body { background-color: #ffffff; font-family: 'Inter', sans-serif; color: #000; }
    
    /* Header/Top Options Style */
    .top-promo-bar { background: #000; color: #fff; font-size: 11px; padding: 8px 0; text-align: center; letter-spacing: 1px; }

    /* --- 2. MINIMALIST LARGE BANNER --- */
    .hero-banner {
        height: 550px;
        background-image: url('https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=2070');
        background-size: cover; background-position: center;
        display: flex; align-items: center; justify-content: center;
        text-align: center; position: relative;
    }
    .hero-content { background: rgba(255,255,255,0.9); padding: 40px 60px; border-radius: 2px; }
    .hero-content h4 { font-size: 12px; text-transform: uppercase; letter-spacing: 3px; color: #666; margin-bottom: 10px; }
    .hero-content h1 { font-size: 3.5rem; font-weight: 700; margin-bottom: 20px; }
    .btn-garage { background: #000; color: #fff; border: none; padding: 12px 35px; text-transform: uppercase; font-size: 12px; font-weight: 600; letter-spacing: 1px; }

    /* --- 3. CIRCLE CATEGORY LINE (WITH IMAGES) --- */
    .cat-wrapper { padding: 40px 0; border-bottom: 1px solid #f0f0f0; }
    .cat-item-circle { text-align: center; cursor: pointer; transition: 0.3s; }
    .circle-img { 
        width: 100px; height: 100px; border-radius: 50%; overflow: hidden; 
        margin: 0 auto 15px; border: 1px solid #eee; background: #f9f9f9;
    }
    .circle-img img { width: 100%; height: 100%; object-fit: cover; }
    .cat-item-circle span { font-size: 12px; font-weight: 600; color: #333; }
    .cat-item-circle:hover .circle-img { border-color: #000; transform: scale(1.05); }

    /* --- 4. YELLOW FLASH SALE BAR --- */
    .flash-sale-bar {
        background: #fdf59a; padding: 20px 0; margin: 40px 0;
        display: flex; justify-content: center; align-items: center; gap: 30px;
    }
    .flash-text { font-weight: 700; font-size: 14px; text-transform: uppercase; }
    .timer-display { font-size: 24px; font-weight: 800; letter-spacing: 2px; }

    /* --- 5. PRODUCT GRID (GARAGE STYLE) --- */
    .garage-card { border: none !important; margin-bottom: 40px; position: relative; }
    .img-box { background: #f5f5f5; padding: 0px; overflow: hidden; position: relative; height: 400px; }
    .img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
    .garage-card:hover img { transform: scale(1.03); }
    
    .badge-promo { position: absolute; top: 15px; left: 15px; background: #000; color: #fff; font-size: 10px; padding: 4px 10px; font-weight: 600; }
    
    .card-meta { padding: 15px 0; }
    .card-meta .category-label { font-size: 11px; color: #888; text-transform: uppercase; margin-bottom: 5px; display: block; }
    .card-meta .product-name { font-size: 14px; font-weight: 600; color: #000; margin-bottom: 5px; }
    .card-meta .price-box { font-size: 14px; font-weight: 700; }

    /* Buttons Side-by-Side */
    .garage-btn-group { display: flex; gap: 5px; margin-top: 15px; }
    .btn-add-g { border: 1px solid #000; background: transparent; color: #000; font-size: 11px; padding: 10px; flex: 1; font-weight: 700; text-transform: uppercase; }
    .btn-add-g:hover { background: #000; color: #fff; }
    .btn-buy-g { background: #000; color: #fff; border: 1px solid #000; font-size: 11px; padding: 10px; flex: 1; font-weight: 700; text-transform: uppercase; text-decoration: none; text-align: center; }

    /* --- 6. FEATURED COLLAB SECTION --- */
    .collab-section { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 60px; }
    .collab-box { height: 450px; background-size: cover; background-position: center; position: relative; padding: 30px; display: flex; flex-direction: column; justify-content: flex-end; color: #fff; }
    .collab-box::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.2); }
    .collab-info { position: relative; z-index: 2; }
    .collab-info h3 { font-weight: 700; font-size: 24px; margin-bottom: 15px; }
</style>

<div class="top-promo-bar text-uppercase">Free Express Shipping on orders over $500!</div>

<div class="hero-banner">
    <div class="hero-content">
        <h4>Modern Elegance</h4>
        <h1>Season Edit 2025</h1>
        <button class="btn-garage">Shop Collection</button>
    </div>
</div>

<div class="cat-wrapper">
    <div class="container">
        <div class="row g-4 justify-content-center">
            <div class="col-4 col-md-1">
                <div class="cat-item-circle">
                    <div class="circle-img"><img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=100"></div>
                    <span>T-Shirts</span>
                </div>
            </div>
            <div class="col-4 col-md-1">
                <div class="cat-item-circle">
                    <div class="circle-img"><img src="https://images.unsplash.com/photo-1591047139829-d91aecb6caea?q=80&w=100"></div>
                    <span>Jackets</span>
                </div>
            </div>
            <div class="col-4 col-md-1">
                <div class="cat-item-circle">
                    <div class="circle-img"><img src="https://images.unsplash.com/photo-1542272604-787c3835535d?q=80&w=100"></div>
                    <span>Jeans</span>
                </div>
            </div>
            <div class="col-4 col-md-1">
                <div class="cat-item-circle">
                    <div class="circle-img"><img src="https://images.unsplash.com/photo-1588850561407-ed78c282e89b?q=80&w=100"></div>
                    <span>Caps</span>
                </div>
            </div>
            <div class="col-4 col-md-1">
                <div class="cat-item-circle">
                    <div class="circle-img"><img src="https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?q=80&w=100"></div>
                    <span>Hoodies</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="flash-sale-bar">
    <div class="flash-text">Flash Sale now on!</div>
    <div class="timer-display">00 : 09 : 27 : 59</div>
    <div class="flash-text">Save on new arrivals, bestsellers + more</div>
    <button class="btn-garage btn-sm px-4">Use Code: FLASH50</button>
</div>

<div class="container">
    <h3 class="fw-bold mb-5">New Arrivals</h3>
    <div class="row g-4">
        {% for product in products %}
        <div class="col-lg-3 col-md-4 col-6">
            <div class="garage-card h-100">
                <div class="badge-promo">BEST CHOICE!</div>
                <a href="{% url 'product_detail' product.id %}">
                    <div class="img-box">
                        {% if product.image_url %}<img src="{{ product.image_url }}">
                        {% else %}<img src="{{ product.image.url }}">{% endif %}
                    </div>
                </a>
                <div class="card-meta">
                    <span class="category-label">{{ product.category }}</span>
                    <p class="product-name text-truncate">{{ product.name }}</p>
                    <div class="price-box">
                        <span class="text-danger">{{ product.selling_price|currency:request }}</span>
                        <del class="text-muted small ms-2">{{ product.cost_price|add:"500"|currency:request }}</del>
                    </div>
                    
                    <div class="garage-btn-group">
                        <form action="{% url 'add_to_cart' product.id %}" method="POST" class="flex-grow-1">
                            {% csrf_token %}<button type="submit" class="btn-add-g w-100">Add to Cart</button>
                        </form>
                        <a href="{% url 'buy_now' product.id %}" class="btn-buy-g flex-grow-1">Buy Now</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="container my-5 pt-5">
    <div class="collab-section">
        <div class="collab-box" style="background-image: url('https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?q=80&w=2070');">
            <div class="collab-info">
                <h3>The Woodwork</h3>
                <button class="btn btn-light btn-sm px-4 rounded-0 fw-bold">Shop Now</button>
            </div>
        </div>
        <div class="collab-box" style="background-image: url('https://images.unsplash.com/photo-1539106609214-0d75a469627a?q=80&w=2070');">
            <div class="collab-info">
                <h3>Danish Design</h3>
                <button class="btn btn-light btn-sm px-4 rounded-0 fw-bold">Shop Now</button>
            </div>
        </div>
        <div class="collab-box" style="background-image: url('https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070');">
            <div class="collab-info">
                <h3>Cotton Collection</h3>
                <button class="btn btn-light btn-sm px-4 rounded-0 fw-bold">Shop Now</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}