{% extends 'store/base.html' %}
{% load static %}
{% load custom_filters %} 

{% block content %}

<style>
    /* --- 1. PREMIUM MINIMALIST GLOBAL STYLES --- */
    body { 
        background-color: #ffffff; 
        color: #000; 
        font-family: 'Inter', sans-serif; /* High-end look font */
    }

    /* --- 2. 5 MOVEMENT BANNER (Carousel) STYLES --- */
    .carousel-item { 
        height: 85vh; 
        background-size: cover; 
        background-position: center; 
        background-color: #000;
    }
    .banner-overlay { 
        background: rgba(0,0,0,0.2); 
        height: 100%; display: flex; align-items: center; justify-content: center; text-align: center;
    }
    .banner-text h1 { 
        font-size: 4.5rem; 
        font-weight: 300; 
        font-style: italic; 
        color: white; 
        margin-bottom: 20px;
    }
    .btn-minimal { 
        background: white; color: black; border-radius: 0; padding: 15px 40px; 
        text-transform: uppercase; font-weight: 600; font-size: 0.8rem; border: 1px solid white;
        transition: 0.3s;
    }
    .btn-minimal:hover { background: transparent; color: white; }

    /* --- 3. TRUST BAR (Clean Style) --- */
    .trust-bar {
        background: white;
        padding: 40px 0;
        border-bottom: 1px solid #eee;
        margin-bottom: 50px;
    }
    .trust-item { text-align: center; border-right: 1px solid #eee; }
    .trust-item:last-child { border-right: none; }
    .trust-icon { color: #000; font-size: 20px; margin-bottom: 10px; }
    .trust-title { font-weight: 700; font-size: 13px; text-transform: uppercase; letter-spacing: 1px; }

    /* --- 4. MINIMAL PRODUCT CARD (Brand Style) --- */
    .minimal-card { border: none !important; margin-bottom: 50px; transition: 0.3s; }
    .card-img-container { 
        background: #f9f9f9; 
        border-radius: 0px; 
        padding: 0px; 
        overflow: hidden;
        position: relative;
    }
    .card-img-top { 
        height: 450px; 
        width: 100%;
        object-fit: cover; 
        transition: 0.6s ease;
    }
    .minimal-card:hover .card-img-top { transform: scale(1.05); }
    
    .product-title { 
        font-size: 0.85rem; 
        font-weight: 600; 
        text-transform: uppercase; 
        margin-top: 15px; 
        letter-spacing: 1px; 
        color: #000;
    }
    .product-price { font-size: 0.9rem; color: #555; font-weight: 500; }

    /* Buttons Style (Side-by-Side) */
    .btn-action-group { display: flex; gap: 5px; margin-top: 15px; }
    .btn-cart-min { 
        border: 1px solid #000; background: transparent; color: #000; 
        font-size: 0.7rem; padding: 10px; flex: 1; 
        text-transform: uppercase; font-weight: 700; transition: 0.3s;
    }
    .btn-cart-min:hover { background: #000; color: #fff; }
    
    .btn-buy-min { 
        background: #000; color: #fff; border: 1px solid #000; 
        font-size: 0.7rem; padding: 10px; flex: 1; 
        text-transform: uppercase; font-weight: 700; text-decoration: none; text-align: center;
    }

    @media (max-width: 768px) {
        .banner-text h1 { font-size: 2.5rem; }
        .carousel-item { height: 60vh; }
        .card-img-top { height: 300px; }
        .trust-item { border-right: none; border-bottom: 1px solid #eee; padding: 15px; }
    }
</style>

<div id="fashionCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="4000">
    <div class="carousel-inner">
        <div class="carousel-item active" style="background-image: url('https://images.unsplash.com/photo-1490114538077-0a7f8cb49891?q=80&w=2070');">
            <div class="banner-overlay"><div class="banner-text"><h1>The Legacy Capsule</h1><a href="#shop" class="btn btn-minimal">Shop the Re-stock</a></div></div>
        </div>
        <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1488161628813-04466f872be2?q=80&w=1964');">
            <div class="banner-overlay"><div class="banner-text"><h1>Nate Robinson Edit</h1><a href="#shop" class="btn btn-minimal">Explore the Edit</a></div></div>
        </div>
        <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?q=80&w=1974');">
            <div class="banner-overlay"><div class="banner-text"><h1>Creator's Club Vol 3.</h1><a href="#shop" class="btn btn-minimal">Join the Club</a></div></div>
        </div>
        <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1539106609214-0d75a469627a?q=80&w=1974');">
            <div class="banner-overlay"><div class="banner-text"><h1>Essential Oversize</h1><a href="#shop" class="btn btn-minimal">Buy Essentials</a></div></div>
        </div>
        <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1516762689617-e1cffcef479d?q=80&w=2022');">
            <div class="banner-overlay"><div class="banner-text"><h1>New Season Drop</h1><a href="#shop" class="btn btn-minimal">Shop Now</a></div></div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#fashionCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button>
    <button class="carousel-control-next" type="button" data-bs-target="#fashionCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button>
</div>

<div class="trust-bar">
    <div class="container">
        <div class="row">
            <div class="col-md-3 trust-item col-6"><i class="fa-solid fa-truck-fast trust-icon"></i><div class="trust-title">Global Shipping</div></div>
            <div class="col-md-3 trust-item col-6"><i class="fa-solid fa-medal trust-icon"></i><div class="trust-title">100% Quality</div></div>
            <div class="col-md-3 trust-item col-6"><i class="fa-solid fa-rotate-left trust-icon"></i><div class="trust-title">Easy Returns</div></div>
            <div class="col-md-3 trust-item col-6"><i class="fa-solid fa-headset trust-icon"></i><div class="trust-title">24/7 Support</div></div>
        </div>
    </div>
</div>

<div id="shop" class="container my-5 pb-5">
    <h6 class="text-uppercase fw-bold text-center mb-5" style="letter-spacing: 5px; font-size: 0.75rem; color: #888;">Shop the Collection</h6>
    
    <div class="row g-4">
        {% for product in products %}
        <div class="col-lg-3 col-md-4 col-6">
            <div class="card minimal-card h-100">
                <div class="card-img-container">
                    <a href="{% url 'product_detail' product.id %}">
                        {% if product.image_url %}
                            <img src="{{ product.image_url }}" class="card-img-top" alt="{{ product.name }}">
                        {% elif product.image %}
                            <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
                        {% endif %}
                    </a>
                    {% if product.is_trending %}
                        <span class="position-absolute top-0 start-0 bg-white text-black px-2 py-1 m-2 small fw-bold" style="font-size:10px; letter-spacing:1px;">NEW</span>
                    {% endif %}
                </div>
                
                <div class="text-center px-2">
                    <p class="product-title mb-1 text-truncate">{{ product.name }}</p>
                    <p class="product-price">
                        {{ product.selling_price|currency:request }}
                        <span class="text-muted text-decoration-line-through ms-2" style="font-size: 0.75rem;">
                            {{ product.cost_price|add:"500"|currency:request }}
                        </span>
                    </p>
                    
                    <div class="btn-action-group">
                        <form action="{% url 'add_to_cart' product.id %}" method="POST" class="flex-grow-1">
                            {% csrf_token %}
                            <button type="submit" class="btn-cart-min w-100">Cart</button>
                        </form>
                        <a href="{% url 'buy_now' product.id %}" class="btn-buy-min flex-grow-1">Buy Now</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}